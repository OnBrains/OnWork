<ui:composition template="/views/inf/page/View.xhtml" xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:define name="head">
        <title>Справочник дней</title>
        <h:outputStylesheet name="style/css/theme-override.css"/>
    </ui:define>

    <ui:define name="pagePath">
        <li>Справочники</li>
        <li>Дни</li>
        <li class="active">Календарь</li>
    </ui:define>

    <ui:define name="body">

        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-md-8">
                        <h3>
                            <h:outputText id="panel_header" value="#{dateFormat.toMMMMMYYYY(dayDirectoryVM.selectedMonth)}"/>
                        </h3>
                    </div>

                    <div class="col-md-4">
                        <h:commandButton value="Next" action="#{dayDirectoryVM.nextMonth()}" process="@this"
                                         update="day_directory_form:days_table panel_header" styleClass="button fright"/>
                        <h:commandButton value="Previous" action="#{dayDirectoryVM.previousMonth()}" process="@this"
                                         update="day_directory_form:days_table panel_header" styleClass="button fright"/>
                    </div>
                </div>
            </div>

            <h:form id="day_directory_form">

                <h:commandButton value="Create days" action="#{dayDirectoryVM.createDaysForYear()}" process="@this"
                                 update="day_directory_form" rendered="#{not dayDirectoryVM.yearHaveDays}"/>

                <h:dataTable id="days_table" value="#{dayDirectoryVM.days}" var="day" styleClass="table">

                    <p:column headerText="День" width="20%">
                        <f:facet name="header">День</f:facet>
                        <h:outputText value="#{dateFormat.toDDEE(day.value).toLowerCase()}"/>
                    </p:column>

                    <p:column headerText="Тип" width="30%">
                        <f:facet name="header">Тип</f:facet>
                        <h:outputText value="#{day.type.objectName}"/>
                    </p:column>

                    <p:column headerText="Описание" width="50%">
                        <f:facet name="header">Описание</f:facet>
                        <h:outputText value="#{day.description}"/>
                    </p:column>

                </h:dataTable>

            </h:form>

        </div>

    </ui:define>

</ui:composition>